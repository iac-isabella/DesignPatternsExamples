{"name":"Design Patterns : Composite and Decorator","tagline":"Trabalho 0 da disciplina de Programação Orientada a Objetos 2. Feito por Isabella de Albuquerque.","body":"> Os padrões Composite e Decorator são padrões estruturais e estão relacionados a como classes e objetos são compostos de forma a gerar estruturas maiores e mais complexas.\r\n\r\n## Padrão Composite\r\n\r\n### Contexto e Aplicações\r\nComposite é um padrão de projeto de software utilizado para representar um objeto que é constituído pela composição de objetos similares a ele. Neste padrão, o objeto composto possui um conjunto de outros objetos que estão na mesma hierarquia de classes a que ele pertence.\r\nÉ utilizado sempre que é necessário representar elementos que são compostos por outros elementos similares.\r\nPor exemplo, em interfaces gráficas um elemento gráfico pode ser constituído pela composição de vários outros elementos gráficos. Uma janela pode conter um ou mais ícones, uma caixa de texto e vários outros elementos gráficos - até mesmo outra janela.\r\n\r\n**Resumindo:**\r\n\r\n* _Objetivo:_ Prover uma estrutura de árvore para representação eficiente de relações todo-parte.  \r\n* _Problema típico:_ Suponha uma estrutura de objetos relacionados a outros na forma de relações todo parte. A questão é: como fazer com que todos os objetos, tanto os \"todos\" como as \"partes\", possam ser manipulados de maneira idêntica por classes clientes, através de uma interface única? \r\n* _Solução:_ O padrão Composite propõe uma classe abstrata comum para objetos \"todo\" e \"parte\", contendo operações comuns a eles. Os objetos \"todo\" contêm listas de objetos \"partes\". Classes clientes acessam a mesma interface (a definida pela classe abstrata) tanto para objetos \"todo\" como para objetos \"parte\". \r\n\r\n###Exemplo\r\nPara fins de demonstração do uso do padrão composite segue um exemplo, cujo código será exibido em Scala. Este código se encontra disponível no GitHub. O diagrama de classes do exemplo está disponível clicando [aqui](https://www.dropbox.com/s/sstk1xguyalk5f0/Composite.png).\r\n\r\nObserve a implementação:\r\n```\r\npackage composite\r\n\r\nimport java.util.ArrayList\r\nimport java.lang.ref.ReferenceQueue.Null\r\n\r\nabstract class Documento (URL: String){\r\n    \r\n\tdef url: String = URL\r\n  \r\n    def imprimirURL(edent: String)\r\n    \r\n    def adicionarfilho(documento: Documento)\r\n    \r\n    def removerfilho(documento: Documento)\r\n    \r\n    def retornarfilho(index: Int): Documento\r\n    \r\n    def numfilhos: Int\r\n}\r\n\r\nclass DocumentoComposto(URL: String) extends Documento (URL: String){\r\n    \r\n    var docsFilhos: ArrayList[Documento] = new ArrayList\r\n\t\r\n    override def url: String = URL\r\n    \r\n    override def imprimirURL(edent: String){\r\n      print(edent)\r\n      print(url)\r\n      print(\"\\n\")\r\n      var index: Int = 0\r\n      while(index < docsFilhos.size()){\r\n        docsFilhos.get(index)imprimirURL(edent.concat(\"-\"))\r\n        index = index + 1\r\n      }\r\n\t}\r\n\r\n\toverride def adicionarfilho(documento: Documento){\r\n\t\tdocsFilhos.add(documento);\r\n    }\r\n\r\n\toverride def removerfilho(documento: Documento){\r\n\t  docsFilhos.remove(documento)\r\n\t}\r\n\t\r\n    override def retornarfilho(index: Int): Documento = docsFilhos.get(index)\r\n    \r\n    override def numfilhos: Int = docsFilhos.size()\r\n}\r\n \r\nclass DocumentoSimples(URL: String) extends Documento (URL: String){\r\n\t\r\n    override def url: String = URL\r\n    \r\n    override def imprimirURL(edent: String){\r\n      print(edent)\r\n      print(url)\r\n      print(\"\\n\")\r\n\t}\r\n\r\n\toverride def adicionarfilho(documento: Documento){}\r\n\t\r\n\toverride def removerfilho(documento: Documento){}\r\n\r\n    override def retornarfilho(index: Int): Documento = null\r\n    \r\n    override def numfilhos: Int = 0\r\n}\r\n\r\n\r\nobject TesteComposite {\r\n  def main(args: Array[String]) = {\r\n    var raiz: DocumentoComposto = new DocumentoComposto(\"c:/Raiz\");\r\n    \r\n    var filhocomp1: DocumentoComposto  = new DocumentoComposto(\"/FilhoComposto1\");\r\n    var filhocomp2: DocumentoComposto  = new DocumentoComposto(\"/FilhoComposto2\");\r\n    raiz.adicionarfilho(filhocomp1);\r\n    raiz.adicionarfilho(filhocomp2);\r\n    \r\n    var ds1: DocumentoSimples = new DocumentoSimples(\"/Simples1\");\r\n    var ds2: DocumentoSimples = new DocumentoSimples(\"/Simples2\");\r\n    filhocomp1.adicionarfilho(ds1);\r\n    filhocomp1.adicionarfilho(ds2);\r\n \r\n    var netocomp: DocumentoComposto  = new DocumentoComposto(\"/netocomp\");\r\n    filhocomp2.adicionarfilho(netocomp);\r\n    \r\n    var ds3: DocumentoSimples = new DocumentoSimples(\"/Simples3\");\r\n    var ds4: DocumentoSimples = new DocumentoSimples(\"/Simples4\");\r\n    netocomp.adicionarfilho(ds3);\r\n    netocomp.adicionarfilho(ds4);\r\n   \r\n    raiz.imprimirURL(\"\");\r\n    \r\n  }\r\n}\r\n```\r\n\r\n## Padrão Decorator\r\n\r\n### Contexto e Aplicações\r\nDecorator ou wrapper, é um padrão de projeto de software que permite adicionar um comportamento a um objeto já existente em tempo de execução, ou seja, agrega dinamicamente responsabilidades adicionais a um objeto.\r\nEle permite acrescentar ou remover responsabilidades a objetos individuais dinamicamente, de forma transparente e evita a explosão de subclasses para prover todas as combinações de responsabilidades.\r\n\r\n**Resumindo:**\r\n* _Objetivo:_ Estender a responsabilidade de um objeto dinamicamente, em tempo de execução, sem a necessidade de criação de subclasses. \r\n* _Problema típico:_ Suponha que um determinado objeto deva possuir novas responsabilidades em determinado momento de seu ciclo de utilização. A questão é: com fazer com que estas responsabilidades não sejam alocadas a todos os objetos da classe à qual pertence, já que elas são específicas dele, ou seja, como adicionar responsabilidades ao objeto quando o mesmo já foi criado? \r\n* _Solução:_ Criar uma classe que será a mãe da classe à qual o objeto pertence e de toda e qualquer responsabilidade adicional, que será chamada de classe decoradora. As responsabilidades adicionais serão derivadas desta classe. Estas farão referência à classe do objeto, adicionando o comportamento desejado.\r\n\r\n###Exemplo\r\nPara fins de demonstração do uso do padrão decorator segue um exemplo, cujo código será exibido em Scala.O diagrama de classes do exemplo está disponível clicando [aqui](https://www.dropbox.com/s/nil9tm0iqh8t6kj/Decorator.png).\r\n\r\nObserve a implementação:\r\n```\r\ntrait Cafe {\r\n  def preco:Double\r\n  def ingredientes: String\r\n}\r\n \r\nclass CafeSimples extends Cafe {\r\n  override def preco = 1\r\n  override def ingredientes = \"Cafe\"\r\n}\r\n \r\nabstract class DecoradorCafe(cafeDecorado: Cafe) extends Cafe {\r\n  \r\n  val sep = \", \"\r\n \r\n  override def preco = cafeDecorado.preco\r\n  override def ingredientes = cafeDecorado.ingredientes\r\n}\r\n \r\nclass Leite(cafeDecorado: Cafe) extends DecoradorCafe(cafeDecorado) {\r\n  override def preco = super.preco + 0.5\r\n  override def ingredientes = super.ingredientes + sep + \"Leite\"\r\n}\r\n \r\nclass Creme(cafeDecorado: Cafe) extends DecoradorCafe(cafeDecorado) {\r\n  override def preco = super.preco + 0.7\r\n  override def ingredientes = super.ingredientes + sep + \"Creme\"\r\n}\r\n \r\nclass Canela(cafeDecorado: Cafe) extends DecoradorCafe(cafeDecorado) {\r\n  override def preco = super.preco + 0.2\r\n  override def ingredientes = super.ingredientes + sep + \"Canela\"\r\n}\r\n\r\nobject TesteDecorator {\r\n  def main(args: Array[String]) = {\r\n    var c:Cafe = new CafeSimples\r\n    printf(\"Preco: %f Ingredientes %s\\n\", c.preco, c.ingredientes)\r\n    c = new Leite(c)\r\n    printf(\"Preco: %f Ingredientes %s\\n\", c.preco, c.ingredientes)\r\n    c = new Canela(c)\r\n    printf(\"Preco: %f Ingredientes %s\\n\", c.preco, c.ingredientes)\r\n    c = new Creme(c)\r\n    printf(\"Preco: %f Ingredientes %s\\n\", c.preco, c.ingredientes)\r\n    c = new Canela(c)\r\n    printf(\"Preco: %f Ingredientes %s\\n\", c.preco, c.ingredientes)\r\n  }\r\n}\r\n```","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}